---
layout: default
---

<div class="container my-5">
    <!-- Back button and title -->
    <div class="row mb-4">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="{{ '/' | relative_url }}">Home</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="{{ '/pontos/' | relative_url }}">Pontos</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                        {{ page.nome }}
                    </li>
                </ol>
            </nav>
            <h1 class="display-5">{{ page.nome }}</h1>
        </div>
    </div>

    <div class="row">
        <!-- Main content -->
        <div class="col-lg-8">
            <!-- Image gallery -->
            {% if page.imagens and page.imagens.size > 0 %}
            <div class="mb-4">
                {% if page.imagens.size == 1 %}
                <img
                    src="{{ page.imagens[0] | relative_url }}"
                    class="img-fluid rounded shadow"
                    alt="{{ page.nome }}"
                    style="width: 100%; height: 400px; object-fit: cover"
                />
                {% else %}
                <div
                    id="pontoCarousel"
                    class="carousel slide shadow rounded"
                    data-bs-ride="carousel"
                >
                    <div class="carousel-indicators">
                        {% for imagem in page.imagens %}
                        <button
                            type="button"
                            data-bs-target="#pontoCarousel"
                            data-bs-slide-to="{{ forloop.index0 }}"
                            {%
                            if
                            forloop.first
                            %}class="active"
                            aria-current="true"
                            {%
                            endif
                            %}
                            aria-label="Slide {{ forloop.index }}"
                        ></button>
                        {% endfor %}
                    </div>
                    <div class="carousel-inner">
                        {% for imagem in page.imagens %}
                        <div
                            class="carousel-item {% if forloop.first %}active{% endif %}"
                        >
                            <img
                                src="{{ imagem | relative_url }}"
                                class="d-block w-100"
                                alt="{{ page.nome }}"
                                style="height: 400px; object-fit: cover"
                            />
                        </div>
                        {% endfor %}
                    </div>
                    <button
                        class="carousel-control-prev"
                        type="button"
                        data-bs-target="#pontoCarousel"
                        data-bs-slide="prev"
                    >
                        <span
                            class="carousel-control-prev-icon"
                            aria-hidden="true"
                        ></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button
                        class="carousel-control-next"
                        type="button"
                        data-bs-target="#pontoCarousel"
                        data-bs-slide="next"
                    >
                        <span
                            class="carousel-control-next-icon"
                            aria-hidden="true"
                        ></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- Description -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Descrição</h5>
                    <p class="card-text">{{ page.descricao }}</p>
                </div>
            </div>

            <!-- Content -->
            {% if content and content != '' %}
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Detalhes Adicionais</h5>
                    <div class="card-text">{{ content }}</div>
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">Informações</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <strong>Estado:</strong><br />
                        {% case page.estado %} {% when 'Por resolver' %}
                        <span class="badge bg-warning text-dark fs-6"
                            >{{ page.estado }}</span
                        >
                        {% when 'Em progresso' %}
                        <span class="badge bg-info text-dark fs-6"
                            >{{ page.estado }}</span
                        >
                        {% when 'Resolvido' %}
                        <span class="badge bg-success fs-6"
                            >{{ page.estado }}</span
                        >
                        {% else %}
                        <span class="badge bg-secondary fs-6"
                            >{{ page.estado }}</span
                        >
                        {% endcase %}
                    </div>

                    {% if page.pelouro %}
                    <div class="mb-3">
                        <strong>Pelouro:</strong><br />
                        <span class="text-muted">{{ page.pelouro }}</span>
                    </div>
                    {% endif %} {% if page.tema %}
                    <div class="mb-3">
                        <strong>Tema:</strong><br />
                        <span class="text-muted">{{ page.tema }}</span>
                    </div>
                    {% endif %} {% if page.slug %}
                    <div class="mb-3">
                        <strong>ID:</strong><br />
                        <small class="text-muted font-monospace"
                            >{{ page.slug }}</small
                        >
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Actions card -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">Ações</h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a
                            href="{{ '/pontos/' | relative_url }}"
                            class="btn btn-outline-primary"
                        >
                            <i class="fas fa-arrow-left me-2"></i>Voltar aos
                            Pontos
                        </a>
                        {% if page.imagens and page.imagens.size > 0 %}
                        <button
                            type="button"
                            class="btn btn-outline-secondary"
                            data-bs-toggle="modal"
                            data-bs-target="#shareModal"
                        >
                            <i class="fas fa-share me-2"></i>Partilhar
                        </button>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Related pontos by tema -->
            {% assign related_pontos = site.pages | where_exp: "page_item",
            "page_item.path contains 'pontos/'" | where_exp: "page_item",
            "page_item.slug != nil" | where: "tema", page.tema | where_exp:
            "page_item", "page_item.slug != page.slug" | sort: "nome" | slice:
            0, 3 %} {% if related_pontos.size > 0 %}
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Pontos Relacionados</h5>
                    <small class="text-muted"
                        >Outros pontos com tema "{{ page.tema }}"</small
                    >
                </div>
                <div class="card-body">
                    {% for ponto in related_pontos %}
                    <div
                        class="d-flex mb-3 {% unless forloop.last %}border-bottom pb-3{% endunless %}"
                    >
                        {% if ponto.imagens and ponto.imagens.size > 0 %}
                        <img
                            src="{{ ponto.imagens[0] | relative_url }}"
                            class="rounded me-3"
                            alt="{{ ponto.nome }}"
                            style="width: 60px; height: 60px; object-fit: cover"
                        />
                        {% else %}
                        <div
                            class="bg-light rounded me-3 d-flex align-items-center justify-content-center"
                            style="width: 60px; height: 60px"
                        >
                            <i class="fas fa-map-marker-alt text-muted"></i>
                        </div>
                        {% endif %}
                        <div class="flex-grow-1">
                            <h6 class="mb-1">
                                <a
                                    href="{{ ponto.url | relative_url }}"
                                    class="text-decoration-none"
                                    >{{ ponto.nome }}</a
                                >
                            </h6>
                            <small class="text-muted"
                                >{{ ponto.descricao | truncatewords: 10
                                }}</small
                            >
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Share Modal -->
{% if page.imagens and page.imagens.size > 0 %}
<div
    class="modal fade"
    id="shareModal"
    tabindex="-1"
    aria-labelledby="shareModalLabel"
    aria-hidden="true"
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="shareModalLabel">
                    Partilhar Ponto
                </h5>
                <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                ></button>
            </div>
            <div class="modal-body">
                <p>Partilhe este ponto:</p>
                <div class="input-group">
                    <input
                        type="text"
                        class="form-control"
                        id="shareUrl"
                        value="{{ page.url | absolute_url }}"
                        readonly
                    />
                    <button
                        class="btn btn-outline-secondary"
                        type="button"
                        onclick="copyToClipboard()"
                    >
                        Copiar
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function copyToClipboard() {
        const shareUrl = document.getElementById("shareUrl");
        shareUrl.select();
        shareUrl.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(shareUrl.value).then(function () {
            const button = document.querySelector(
                '#shareModal button[onclick="copyToClipboard()"]',
            );
            const originalText = button.textContent;
            button.textContent = "Copiado!";
            button.classList.remove("btn-outline-secondary");
            button.classList.add("btn-success");
            setTimeout(function () {
                button.textContent = originalText;
                button.classList.remove("btn-success");
                button.classList.add("btn-outline-secondary");
            }, 2000);
        });
    }
</script>
{% endif %}
